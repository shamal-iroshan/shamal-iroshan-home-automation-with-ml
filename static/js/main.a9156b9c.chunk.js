(this["webpackJsonphome-automation"]=this["webpackJsonphome-automation"]||[]).push([[0],{39:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(16),s=n.n(a),o=(n(39),n(8)),i="Home/GET_DATA",u="Home/SAVE_DATA",l="Home/SAVE_CONFIG",d="Home/UPDATE_STATE",m="Home/UPDATE_DEVICE",b="Home/DELETE_DEVICE",j="Home/ADD_DEVICE",p="Home/SET_LOGGING",f=function(e){return{type:u,payload:e}},h=n(1);function v(){var e=Object(o.b)();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-12 d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(h.jsxs)("form",{style:{width:"500px"},onSubmit:function(t){t.preventDefault();var n=t.target.elements.username.value,c=t.target.elements.password.value;"shamal"===n&&"Shamal@2000"===c?e({type:p,payload:!0}):alert("Check your username and password")},children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"username",children:"Username"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",placeholder:"Username"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})})})})}var x=n(34),O=n(21);n(47);function w(e){var t=e.showAdd,n=e.setShowAdd,c=e.showEdit,r=e.setShowEdit,a=e.devicesData,s=Object(o.b)(),i=Object(o.c)((function(e){return e.homeReducer.config}));return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"container mt-5 mt-sm-5 mt-md-5 mt-lg-0 mt-xl-0",children:Object(h.jsxs)("div",{className:"row",children:[!t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-2 col-xl-2 pl-0",children:Object(h.jsx)("button",{onClick:function(){return n(!t)},className:"btn btn-outline-primary w-100",children:"Add"})}),Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-2 col-xl-2 pl-0",children:Object(h.jsx)("button",{onClick:function(){return r(!c)},className:"btn btn-outline-warning w-100",children:c?"Cancel":"Edit"})})]}),t&&Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-8 col-lg-6 col-xl-6 pl-0",children:Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=e.target.elements.deviceName.value;a.length<(null===i||void 0===i?void 0:i.maxDevices)?s({type:j,payload:c}):alert("You have reached maximum device count"),n(!t)},children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-7",children:Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsx)("input",{type:"text",className:"form-control",name:"deviceName",id:"device-name",placeholder:"Enter device name"})})}),Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 mt-3 mt-sm-3 mt-md-0 mt-lg-0 mt-xl-0",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Save"})}),Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-2 mt-3 mt-sm-3 mt-md-0 mt-lg-0 mt-xl-0",children:Object(h.jsx)("button",{onClick:function(){return n(!t)},type:"button",className:"btn btn-danger w-100",children:"Close"})})]})})})]})})})}var g=n(32);function y(e){var t=e.devicesData,n=Object(o.b)(),r=Object(c.useState)(!1),a=Object(O.a)(r,2),s=a[0],i=a[1],u=Object(c.useState)(!1),l=Object(O.a)(u,2),j=l[0],p=l[1];function v(e,c){var r=Object(x.a)(t),a=r.find((function(t){return t._id===e})),s=r.findIndex((function(t){return t._id===e}));1===(null===a||void 0===a?void 0:a.state)?a.state=0:a.state=1,r.splice(s,1,a);var o={deviceId:a._id,state:a.state,name:c,day:(new Date).getDay(),on:"automated"===c&&1===a.state?(new Date).toLocaleTimeString():void 0,off:"automated"===c&&0===a.state?(new Date).toLocaleTimeString():void 0};n(f(r)),n({type:d,payload:o})}var y=function(e,t){if("Enter"===e.key){var c={deviceId:t,name:e.target.value};n({type:m,payload:c}),p(!1)}},N=function(e){window.confirm("Are you sure you want to delete")&&n({type:b,payload:e})};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"container d-flex justify-content-center align-items-center flex-column",style:{minHeight:"100vh"},children:[Object(h.jsx)(w,{showAdd:s,setShowAdd:i,showEdit:j,setShowEdit:p,devicesData:t}),Object(h.jsx)("div",{className:"row mb-5",style:{width:"inherit"},children:t.map((function(e,t){return Object(h.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 mt-4 ".concat(0===t&&"pl-0"),style:{width:"inherit"},children:Object(h.jsx)("div",{className:"card ".concat("automated"===e.device&&"bg-warning"," "),style:{width:"inherit",height:200},children:Object(h.jsxs)("div",{className:"card-body",children:[j?Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"text",defaultValue:e.device,onKeyPress:function(t){return y(t,e._id)}}),Object(h.jsx)(g.a,{icon:"ant-design:close-circle-filled",color:"#f30",width:"20",height:"20",className:"mb-1 ml-1 mouse-hover",onClick:function(){return N(e._id)}})]}):Object(h.jsx)("h5",{className:"card-title",children:e.device}),"automated"===e.device&&Object(h.jsxs)("p",{className:"card-text",children:["This device will turn ",1===e.state?"off":"on"," automatically by system."]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("label",{className:"switch",children:[Object(h.jsx)("input",{type:"checkbox",checked:1===e.state,onChange:function(){return v(e._id,e.device)}}),Object(h.jsx)("span",{className:"slider round"})]})]})})},e._id)}))})]})})}var N=function(){var e=Object(o.c)((function(e){return e.homeReducer.isLoggedIn})),t=Object(o.c)((function(e){return e.homeReducer.devicesData}));return Object(h.jsxs)(h.Fragment,{children:[!e&&Object(h.jsx)(v,{}),e&&Object(h.jsx)(y,{devicesData:t})]})};n(48);var k=function(){var e=Object(o.b)();return Object(c.useEffect)((function(){e({type:i})}),[e]),Object(h.jsx)(N,{})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},D=n(10),_=n(33),S=n(6),I={config:null,devicesData:[],isLoggedIn:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(S.a)(Object(S.a)({},e),{},{devicesData:t.payload});case l:return Object(S.a)(Object(S.a)({},e),{},{config:t.payload});case p:return Object(S.a)(Object(S.a)({},e),{},{isLoggedIn:t.payload});default:return e}},C=Object(D.b)({homeReducer:A}),T=n(5),F=n.n(T),L=n(7),H=n(11),P=n(31),V=n.n(P).a.create({baseURL:"http://finalproject-env-1.eba-5pprkiwz.ap-southeast-1.elasticbeanstalk.com/"}),R=F.a.mark(W),U=F.a.mark(Z),G=F.a.mark($),B=F.a.mark(ee),J=F.a.mark(te),M=F.a.mark(ne),X=function(){var e=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.get("/get-status").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(H.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.get("/get-config").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(H.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deviceId:t.deviceId,state:t.state,name:t.name,day:t.day,on:t.on?t.on:void 0,off:t.off?t.off:void 0},e.abrupt("return",V.patch("/update-state",null,{params:n}).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(H.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.patch("/edit-device?deviceId=".concat(t.deviceId,"&deviceName=").concat(t.name)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(H.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.delete("/delete-device?deviceId=".concat(t)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(H.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post("/add-device?deviceName=".concat(t)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function W(){var e,t;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(L.b)(z);case 3:return e=n.sent,n.next=6,Object(L.b)(X);case 6:return t=n.sent,n.next=9,Object(L.d)(f(t));case 9:if(!(e.length>0)){n.next=12;break}return n.next=12,Object(L.d)((c=e[0],{type:l,payload:c}));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.error(n.t0);case 17:case"end":return n.stop()}var c}),R,null,[[0,14]])}function Z(e){var t;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload,n.next=4,Object(L.b)(K,t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0);case 9:case"end":return n.stop()}}),U,null,[[0,6]])}function $(e){var t,n;return F.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(L.b)(Y,t);case 4:if(200!==c.sent.status){c.next=11;break}return c.next=8,Object(L.b)(X);case 8:return n=c.sent,c.next=11,Object(L.d)(f(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),G,null,[[0,13]])}function ee(e){var t,n;return F.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(L.b)(q,t);case 4:if(200!==c.sent.status){c.next=11;break}return c.next=8,Object(L.b)(X);case 8:return n=c.sent,c.next=11,Object(L.d)(f(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),B,null,[[0,13]])}function te(e){var t,n;return F.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(L.b)(Q,t);case 4:if(201!==c.sent.status){c.next=11;break}return c.next=8,Object(L.b)(X);case 8:return n=c.sent,c.next=11,Object(L.d)(f(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),J,null,[[0,13]])}function ne(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.e)(i,W);case 2:return e.next=4,Object(L.e)(d,Z);case 4:return e.next=6,Object(L.e)(m,$);case 6:return e.next=8,Object(L.e)(b,ee);case 8:return e.next=10,Object(L.e)(j,te);case 10:case"end":return e.stop()}}),M)}var ce=[ne],re=F.a.mark(ae);function ae(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)(ce.map((function(e){return Object(L.c)(e)})));case 2:case"end":return e.stop()}}),re)}var se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.c;var oe=function(){var e=Object(_.a)(),t=Object(D.d)(C,se(Object(D.a)(e)));return e.run(ae),t}();s.a.render(Object(h.jsx)(o.a,{store:oe,children:Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(k,{})})}),document.getElementById("root")),E()}},[[68,1,2]]]);
//# sourceMappingURL=main.a9156b9c.chunk.js.map