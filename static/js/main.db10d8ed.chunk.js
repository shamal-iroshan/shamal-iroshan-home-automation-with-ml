(this["webpackJsonphome-automation"]=this["webpackJsonphome-automation"]||[]).push([[0],{39:function(e,t,n){},41:function(e,t,n){},48:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(16),s=n.n(a),o=(n(39),n(1));var i=n(34),u=n(21),l=(n(41),n(9)),d="Home/GET_DATA",b="Home/SAVE_DATA",m="Home/SAVE_CONFIG",j="Home/UPDATE_STATE",f="Home/UPDATE_DEVICE",p="Home/DELETE_DEVICE",v="Home/ADD_DEVICE",h=function(e){return{type:b,payload:e}};function x(e){var t=e.showAdd,n=e.setShowAdd,c=e.showEdit,r=e.setShowEdit,a=e.devicesData,s=Object(l.b)(),i=Object(l.c)((function(e){return e.homeReducer.config}));return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"container mt-5 mt-sm-5 mt-md-5 mt-lg-0 mt-xl-0",children:Object(o.jsxs)("div",{className:"row",children:[!t&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-2 col-xl-2 pl-0",children:Object(o.jsx)("button",{onClick:function(){return n(!t)},className:"btn btn-outline-primary w-100",children:"Add"})}),Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-2 col-xl-2 pl-0",children:Object(o.jsx)("button",{onClick:function(){return r(!c)},className:"btn btn-outline-warning w-100",children:c?"Cancel":"Edit"})})]}),t&&Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-8 col-lg-6 col-xl-6 pl-0",children:Object(o.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=e.target.elements.deviceName.value;a.length<(null===i||void 0===i?void 0:i.maxDevices)?s({type:v,payload:c}):alert("You have reached maximum device count"),n(!t)},children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-7",children:Object(o.jsx)("div",{className:"form-group mb-0",children:Object(o.jsx)("input",{type:"text",className:"form-control",name:"deviceName",id:"device-name",placeholder:"Enter device name"})})}),Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 mt-3 mt-sm-3 mt-md-0 mt-lg-0 mt-xl-0",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Save"})}),Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-2 mt-3 mt-sm-3 mt-md-0 mt-lg-0 mt-xl-0",children:Object(o.jsx)("button",{onClick:function(){return n(!t)},type:"button",className:"btn btn-danger w-100",children:"Close"})})]})})})]})})})}var O=n(32);function w(e){var t=e.devicesData,n=Object(l.b)(),r=Object(c.useState)(!1),a=Object(u.a)(r,2),s=a[0],d=a[1],b=Object(c.useState)(!1),m=Object(u.a)(b,2),v=m[0],w=m[1];function y(e,c){var r=Object(i.a)(t),a=r.find((function(t){return t._id===e})),s=r.findIndex((function(t){return t._id===e}));1===(null===a||void 0===a?void 0:a.state)?a.state=0:a.state=1,r.splice(s,1,a);var o={deviceId:a._id,state:a.state,name:c,day:(new Date).getDay(),on:"automated"===c&&1===a.state?(new Date).toLocaleTimeString():void 0,off:"automated"===c&&0===a.state?(new Date).toLocaleTimeString():void 0};n(h(r)),n({type:j,payload:o})}var g=function(e,t){if("Enter"===e.key){var c={deviceId:t,name:e.target.value};n({type:f,payload:c}),w(!1)}},k=function(e){window.confirm("Are you sure you want to delete")&&n({type:p,payload:e})};return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"container d-flex justify-content-center align-items-center flex-column",style:{minHeight:"100vh"},children:[Object(o.jsx)(x,{showAdd:s,setShowAdd:d,showEdit:v,setShowEdit:w,devicesData:t}),Object(o.jsx)("div",{className:"row mb-5",style:{width:"inherit"},children:t.map((function(e,t){return Object(o.jsx)("div",{className:"col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 mt-4 ".concat(0===t&&"pl-0"),style:{width:"inherit"},children:Object(o.jsx)("div",{className:"card ".concat("automated"===e.device&&"bg-warning"," "),style:{width:"inherit",height:200},children:Object(o.jsxs)("div",{className:"card-body",children:[v?Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{type:"text",defaultValue:e.device,onKeyPress:function(t){return g(t,e._id)}}),Object(o.jsx)(O.a,{icon:"ant-design:close-circle-filled",color:"#f30",width:"20",height:"20",className:"mb-1 ml-1 mouse-hover",onClick:function(){return k(e._id)}})]}):Object(o.jsx)("h5",{className:"card-title",children:e.device}),"automated"===e.device&&Object(o.jsxs)("p",{className:"card-text",children:["This device will turn ",1===e.state?"off":"on"," automatically by system."]}),Object(o.jsx)("hr",{}),Object(o.jsxs)("label",{className:"switch",children:[Object(o.jsx)("input",{type:"checkbox",checked:1===e.state,onChange:function(){return y(e._id,e.device)}}),Object(o.jsx)("span",{className:"slider round"})]})]})})},e._id)}))})]})})}var y=function(){var e=Object(l.c)((function(e){return e.homeReducer.devicesData}));return Object(o.jsxs)(o.Fragment,{children:[!1,Object(o.jsx)(w,{devicesData:e})]})};n(48);var g=function(){var e=Object(l.b)();return Object(c.useEffect)((function(){e({type:d})}),[e]),Object(o.jsx)(y,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},N=n(10),E=n(33),D=n(6),_={config:null,devicesData:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(D.a)(Object(D.a)({},e),{},{devicesData:t.payload});case m:return Object(D.a)(Object(D.a)({},e),{},{config:t.payload});default:return e}},A=Object(N.b)({homeReducer:S}),C=n(5),I=n.n(C),T=n(7),F=n(11),H=n(31),L=n.n(H).a.create({baseURL:"http://finalproject-env-1.eba-5pprkiwz.ap-southeast-1.elasticbeanstalk.com/"}),V=I.a.mark(q),P=I.a.mark(Q),R=I.a.mark(W),U=I.a.mark(Z),B=I.a.mark($),G=I.a.mark(ee),J=function(){var e=Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.get("/get-status").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.get("/get-config").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(F.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={deviceId:t.deviceId,state:t.state,name:t.name,day:t.day,on:t.on?t.on:void 0,off:t.off?t.off:void 0},e.abrupt("return",L.patch("/update-state",null,{params:n}).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(F.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.patch("/edit-device?deviceId=".concat(t.deviceId,"&deviceName=").concat(t.name)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(F.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.delete("/delete-device?deviceId=".concat(t)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(F.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.post("/add-device?deviceName=".concat(t)).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function q(){var e,t;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(T.b)(M);case 3:return e=n.sent,n.next=6,Object(T.b)(J);case 6:return t=n.sent,n.next=9,Object(T.d)(h(t));case 9:if(!(e.length>0)){n.next=12;break}return n.next=12,Object(T.d)((c=e[0],{type:m,payload:c}));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.error(n.t0);case 17:case"end":return n.stop()}var c}),V,null,[[0,14]])}function Q(e){var t;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload,n.next=4,Object(T.b)(X,t);case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0);case 9:case"end":return n.stop()}}),P,null,[[0,6]])}function W(e){var t,n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(T.b)(z,t);case 4:if(200!==c.sent.status){c.next=11;break}return c.next=8,Object(T.b)(J);case 8:return n=c.sent,c.next=11,Object(T.d)(h(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),R,null,[[0,13]])}function Z(e){var t,n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(T.b)(K,t);case 4:if(200!==c.sent.status){c.next=11;break}return c.next=8,Object(T.b)(J);case 8:return n=c.sent,c.next=11,Object(T.d)(h(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),U,null,[[0,13]])}function $(e){var t,n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,c.next=4,Object(T.b)(Y,t);case 4:if(201!==c.sent.status){c.next=11;break}return c.next=8,Object(T.b)(J);case 8:return n=c.sent,c.next=11,Object(T.d)(h(n));case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),B,null,[[0,13]])}function ee(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.e)(d,q);case 2:return e.next=4,Object(T.e)(j,Q);case 4:return e.next=6,Object(T.e)(f,W);case 6:return e.next=8,Object(T.e)(p,Z);case 8:return e.next=10,Object(T.e)(v,$);case 10:case"end":return e.stop()}}),G)}var te=[ee],ne=I.a.mark(ce);function ce(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)(te.map((function(e){return Object(T.c)(e)})));case 2:case"end":return e.stop()}}),ne)}var re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||N.c;var ae=function(){var e=Object(E.a)(),t=Object(N.d)(A,re(Object(N.a)(e)));return e.run(ce),t}();s.a.render(Object(o.jsx)(l.a,{store:ae,children:Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(g,{})})}),document.getElementById("root")),k()}},[[68,1,2]]]);
//# sourceMappingURL=main.db10d8ed.chunk.js.map